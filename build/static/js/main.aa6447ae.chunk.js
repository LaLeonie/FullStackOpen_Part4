(this.webpackJsonppart4_frontend=this.webpackJsonppart4_frontend||[]).push([[0],{18:function(e,t,n){e.exports=n(44)},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(16),c=n.n(l),o=n(2),u=n.n(o),i=n(4),s=n(6),m=n(1),f=function(e){var t=e.addPostFunction,n=Object(a.useState)(""),l=Object(m.a)(n,2),c=l[0],o=l[1],u=Object(a.useState)(""),i=Object(m.a)(u,2),s=i[0],f=i[1],d=Object(a.useState)(""),p=Object(m.a)(d,2),g=p[0],b=p[1],h=function(){o(""),f(""),b("")};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({author:c,title:s,url:g}),h()}},r.a.createElement("p",null,"author:",r.a.createElement("input",{id:"author",value:c,onChange:function(e){o(e.target.value)}})),r.a.createElement("p",null,"title:",r.a.createElement("input",{id:"title",value:s,onChange:function(e){f(e.target.value)}})),r.a.createElement("p",null,"url: ",r.a.createElement("input",{id:"url",value:g,onChange:function(e){b(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("button",{type:"submit"},"ADD"),r.a.createElement("button",{onClick:h,type:"reset"},"CLEAR")))},d=function(e){var t=e.author,n=e.title,a=e.url,l=e.likes,c=e.id,o=e.onLikeClick,u=e.onDeleteClick;return r.a.createElement("tr",null,r.a.createElement("td",null,n),r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement("a",{href:a},"Link to ",n)),r.a.createElement("td",{className:"likesAmount"},l),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return o(c)},className:"likeButton"},"LIKE")),r.a.createElement("td",null,r.a.createElement("button",{className:"deleteButton",onClick:function(){return u(c,n)}},"DELETE")))},p=function(e){var t=e.list,n=e.onLikeClick,a=e.onDeleteClick;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Url"),r.a.createElement("th",null,"Likes"),r.a.createElement("th",null,"Like Button"),r.a.createElement("th",null,"Delete Button"))),r.a.createElement("tbody",null,t.sort((function(e,t){return t.likes-e.likes})).map((function(e){return r.a.createElement(d,{key:e.id,author:e.author,title:e.title,url:e.url,likes:e.likes,id:e.id,onLikeClick:n,onDeleteClick:a})}))))},g=function(e){var t=e.notificationObject,n={fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},a=Object(s.a)({color:"#429745",background:"#a9daab"},n),l=Object(s.a)({color:"#a34847",background:"#d49e9d"},n);return null===t?null:r.a.createElement("div",{style:"success"===t.type?a:l},t.message)},b=function(e){return r.a.createElement("p",null,"Filter entries by ",e.type,":",r.a.createElement("input",{type:"text",name:"filter",value:e.newFilter,onChange:e.onChange}))},h=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),l=Object(m.a)(n,2),c=l[0],o=l[1],u=function(){o(!c)},i={display:c?"none":""},s={display:c?"":"none"};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisible:u}})),r.a.createElement("div",null,r.a.createElement("div",{style:i},r.a.createElement("button",{onClick:u},e.buttonLabel)),r.a.createElement("div",{style:s,className:"togglableContent"},e.children,r.a.createElement("button",{onClick:u,className:"cancelButton"},"cancel")))}));h.displayName="Togglable";var E=h,v=function(e){var t=e.category,n=e.handleCategoryChange,a=e.filter,l=e.onFilterInputChange;return r.a.createElement("div",{className:"filterComponent"},r.a.createElement("h2",null,"Filter posts"),r.a.createElement(E,{buttonLabel:"Open filter"},r.a.createElement("form",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"categorie",value:"author",checked:"author"===t,onChange:n}),"author"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"categorie",value:"title",checked:"title"===t,onChange:n}),"title"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"categorie",value:"likes",checked:"likes"===t,onChange:n}),"likes")),r.a.createElement(b,{type:t,newFilter:a,onChange:l})))},k=n(17),w=function(e){var t=e.onLoginFunction,n=Object(a.useState)(""),l=Object(m.a)(n,2),c=l[0],o=l[1],u=Object(a.useState)(""),i=Object(m.a)(u,2),s=i[0],f=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"log in to application"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(c,s)}},r.a.createElement("p",null,"username:",r.a.createElement("input",{id:"usernameInput",type:"text",name:"Username",value:c,onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement("p",null,"password:",r.a.createElement("input",{id:"passwordInput",type:"text",name:"Password",value:s,onChange:function(e){var t=e.target;return f(t.value)}})),r.a.createElement("button",{id:"loginButton",type:"submit"},"login")))};w.PropsTypes={onLoginFunction:n.n(k).a.func.isRequired};var y=w,O=n(5),C=n.n(O),j=null,L={getAll:function(){return C.a.get("/blogPosts").then((function(e){return e.data}))},create:function(){var e=Object(i.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:j}},e.next=3,C.a.post("/blogPosts",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.put("".concat("/blogPosts","/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deletePost:function(){var e=Object(i.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:j}},e.next=3,C.a.delete("".concat("/blogPosts","/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){j="bearer ".concat(e)}},S={login:function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};n(43);var x=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(0),o=Object(m.a)(c,2),d=o[0],b=o[1],h=Object(a.useState)(null),k=Object(m.a)(h,2),w=k[0],O=k[1],C=Object(a.useState)(""),j=Object(m.a)(C,2),x=j[0],F=j[1],B=Object(a.useState)("author"),D=Object(m.a)(B,2),A=D[0],I=D[1],N=Object(a.useState)(null),P=Object(m.a)(N,2),T=P[0],J=P[1];Object(a.useEffect)((function(){L.getAll().then((function(e){return l(e)})).catch((function(e){return console.log("there was an error",e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogUser");if(e){var t=JSON.parse(e);J(t),L.setToken(t.token)}}),[]);var R=function(e,t){O({message:e,type:t}),setTimeout((function(){O(null)}),5e3)},U=function(){var e=Object(i.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.login({username:t,password:n});case 3:a=e.sent,J(a),L.setToken(a.token),window.localStorage.setItem("loggedBlogUser",JSON.stringify(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),R("wrong username or password","fail");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedBlogUser"),J(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=""!==x?function(e,t,n){if("author"===e)return t.filter((function(e){return e.author.toLowerCase().includes(n.toLowerCase())}));if("title"===e)return t.filter((function(e){return e.title.toLowerCase().includes(n.toLowerCase())}));if("likes"===e){var a=parseInt(n);if(a)return t.filter((function(e){return e.likes>=a}));console.log("please enter a number")}}(A,n,x):n,V=r.a.createRef();return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Blog List"),r.a.createElement(g,{notificationObject:w}),null===T?r.a.createElement(E,{buttonLabel:"login"},r.a.createElement(y,{onLoginFunction:U})):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,T.username," logged in"),r.a.createElement("button",{onClick:z},"logout"),r.a.createElement(v,{category:A,handleCategoryChange:function(e){I(e.target.value)},filter:x,onFilterInputChange:function(e){F(e.target.value)}}),r.a.createElement("h2",null,"Add a new blog entry"),r.a.createElement(E,{buttonLabel:"Add blog",ref:V},r.a.createElement(f,{addPostFunction:function(e){var t,a,r={author:e.author,title:e.title,url:e.url,likes:d,id:Math.floor(256*(1+Math.random()))},c=n.filter((function(e){return e.title.toLowerCase()===r.title.toLowerCase()}));c.length>0?(t=c[0],a=r,window.confirm("".concat(t.title," already exists. Do you want to update this entry?"))&&L.update(t.id,a).then((function(e){l(n.map((function(n){return n.id!==t.id?n:e}))),R("Entry for ".concat(a.title," was changed"),"success")}))):L.create(r).then((function(e){l(n.concat(e)),R('a new blog "'.concat(e.title,'" by ').concat(T.username," has been added"),"success")})).catch((function(e){console.log("this is the error",e)})),V.current.toggleVisible()}})),r.a.createElement("h2",null,"List of blogs"),r.a.createElement(p,{list:M,onLikeClick:function(e){var t=n.find((function(t){return t.id===e})),a=Object(s.a)({likes:b(t.likes++)},t);L.update(e,a).then((function(t){return l(n.map((function(n){return n.id===e?t:n})))}))},onDeleteClick:function(e,t){window.confirm("Delete ".concat(t,"?"))?L.deletePost(e).then((function(a){console.log(a),l(n.filter((function(t){return t.id!==e}))),R("".concat(t," has been deleted"),"success")})).catch((function(e){var t=JSON.stringify(e);console.log(t),R("".concat(e),"fail")})):l(n)}})))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.aa6447ae.chunk.js.map