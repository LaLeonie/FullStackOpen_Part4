(this.webpackJsonppart4_frontend=this.webpackJsonppart4_frontend||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(16),u=n.n(l),o=n(1),c=n.n(o),i=n(4),s=n(6),m=n(3),f=function(e){return r.a.createElement("form",{onSubmit:e.onSubmitChange},r.a.createElement("p",null,"author:",r.a.createElement("input",{value:e.authorValue,onChange:e.onAuthorChange})),r.a.createElement("p",null,"title: ",r.a.createElement("input",{value:e.titleValue,onChange:e.onTitleChange})),r.a.createElement("p",null,"url: ",r.a.createElement("input",{value:e.urlValue,onChange:e.onUrlChange})),r.a.createElement("p",null,r.a.createElement("button",{type:"submit"},"ADD"),r.a.createElement("button",{onClick:e.onClear,type:"reset"},"CLEAR")))},p=function(e){var t=e.author,n=e.title,a=e.url,l=e.likes,u=e.id,o=e.onLikeClick,c=e.onDeleteClick;return r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,n),r.a.createElement("td",null,r.a.createElement("a",{href:a},"Link to ",n)),r.a.createElement("td",null,l),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return o(u)}},"LIKE")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return c(u,n)}},"DELETE")))},h=function(e){return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Url"),r.a.createElement("th",null,"Likes"),r.a.createElement("th",null,"Like Button"),r.a.createElement("th",null,"Delete Button"))),r.a.createElement("tbody",null,e.list.map((function(t){return r.a.createElement(p,{key:t.id,author:t.author,title:t.title,url:t.url,likes:t.likes,id:t.id,onLikeClick:e.onLikeClick,onDeleteClick:e.onDeleteClick})}))))},d=function(e){var t=e.notificationObject,n={fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},a=Object(s.a)({color:"#429745",background:"#a9daab"},n),l=Object(s.a)({color:"#a34847",background:"#d49e9d"},n);return null===t?null:r.a.createElement("div",{style:"success"===t.type?a:l},t.message)},g=function(e){return r.a.createElement("p",null,"Filter entries by ",e.type,":",r.a.createElement("input",{value:e.newFilter,onChange:e.onChange}))},b=function(e){var t=e.category,n=e.handleCategoryChange,a=e.newFilter,l=e.onFilterInputChange;return r.a.createElement("div",null,r.a.createElement("h2",null,"Filter posts"),r.a.createElement("form",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"categorie",value:"author",checked:"author"===t,onChange:n}),"author"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"categorie",value:"title",checked:"title"===t,onChange:n}),"title"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"categorie",value:"likes",checked:"likes"===t,onChange:n}),"likes")),r.a.createElement(g,{type:t,newFilter:a,onChange:l}))},E=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"log in to application"),r.a.createElement("form",{onSubmit:e.onSubmitChange},r.a.createElement("p",null,"username:",r.a.createElement("input",{type:"text",name:"Username",value:e.username,onChange:e.onUsernameChange})),r.a.createElement("p",null,"password:",r.a.createElement("input",{type:"text",name:"Password",value:e.password,onChange:e.onPasswordChange})),r.a.createElement("button",{type:"submit"},"login")))},v=n(5),C=n.n(v),k=null,w={getAll:function(){return C.a.get("/blogPosts").then((function(e){return e.data}))},create:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:k}},e.next=3,C.a.post("/blogPosts",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.put("".concat("/blogPosts","/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deletePost:function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.delete("".concat("/blogPosts","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){k="bearer ".concat(e)}},O={login:function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};n(40);var y=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],l=t[1],u=Object(a.useState)(""),o=Object(m.a)(u,2),p=o[0],g=o[1],v=Object(a.useState)(""),C=Object(m.a)(v,2),k=C[0],y=C[1],j=Object(a.useState)(""),S=Object(m.a)(j,2),x=S[0],L=S[1],D=Object(a.useState)(0),A=Object(m.a)(D,2),F=A[0],P=A[1],U=Object(a.useState)(null),B=Object(m.a)(U,2),I=B[0],T=B[1],V=Object(a.useState)(""),J=Object(m.a)(V,2),M=J[0],N=J[1],z=Object(a.useState)("author"),R=Object(m.a)(z,2),_=R[0],K=R[1],q=Object(a.useState)(""),G=Object(m.a)(q,2),H=G[0],Q=G[1],W=Object(a.useState)(""),X=Object(m.a)(W,2),Y=X[0],Z=X[1],$=Object(a.useState)(null),ee=Object(m.a)($,2),te=ee[0],ne=ee[1];Object(a.useEffect)((function(){w.getAll().then((function(e){return l(e)})).catch((function(e){return console.log("there was an error",e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogUser");if(e){var t=JSON.parse(e);ne(t),w.setToken(t.token)}}),[]);var ae=function(){g(""),y(""),L(""),Q(""),Z("")},re=function(e,t){T({message:e,type:t}),setTimeout((function(){T(null)}),5e3)},le=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.login({username:H,password:Y});case 4:n=e.sent,w.setToken(n.token),window.localStorage.setItem("loggedBlogUser",JSON.stringify(n)),ne(n),console.log(n),ae(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),re("wrong username or password","fail");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("loggout was pressed"),window.localStorage.removeItem("loggedBlogUser"),ne(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=""!==M?function(e,t,n){if("author"===e)return t.filter((function(e){return e.author.toLowerCase().includes(n.toLowerCase())}));if("title"===e)return t.filter((function(e){return e.title.toLowerCase().includes(n.toLowerCase())}));if("likes"===e){var a=parseInt(n);if(a)return t.filter((function(e){return e.likes>=a}));console.log("please enter a number")}}(_,n,M):n;return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Blog List"),r.a.createElement(d,{notificationObject:I}),null===te?r.a.createElement(E,{password:Y,username:H,onUsernameChange:function(e){var t=e.target;return Q(t.value)},onPasswordChange:function(e){var t=e.target;return Z(t.value)},onSubmitChange:le}):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,te.username," logged in"),r.a.createElement("button",{onClick:ue},"logout"),r.a.createElement(b,{category:_,handleCategoryChange:function(e){return K(e.target.value)},newFilter:M,onFilterInputChange:function(e){N(e.target.value)}}),r.a.createElement("h2",null,"Add a new blog entry"),r.a.createElement(f,{onSubmitChange:function(e){e.preventDefault();var t,a,r={author:p,title:k,url:x,likes:F,id:Math.floor(256*(1+Math.random()))},u=n.filter((function(e){return e.title.toLowerCase()===r.title.toLowerCase()}));u.length>0?(t=u[0],a=r,window.confirm("".concat(t.title," already exists. Do you want to update this entry?"))?w.update(t.id,a).then((function(e){l(n.map((function(n){return n.id!==t.id?n:e}))),ae(),re("Entry for ".concat(a.title," was changed"),"success")})):ae()):w.create(r).then((function(e){l(n.concat(e)),ae(),re('a new blog "'.concat(e.title,'" by ').concat(te.username," has been added"),"success")})).catch((function(e){ae(),console.log("this is the error",e)}))},onClear:function(e){e.preventDefault(),ae()},onAuthorChange:function(e){g(e.target.value)},onTitleChange:function(e){y(e.target.value)},onUrlChange:function(e){L(e.target.value)},authorValue:p,titleValue:k,urlValue:x}),r.a.createElement("h2",null,"List of blogs"),r.a.createElement(h,{list:oe,onLikeClick:function(e){var t=n.find((function(t){return t.id===e})),a=Object(s.a)({likes:P(t.likes++)},t);w.update(e,a).then((function(t){return l(n.map((function(n){return n.id===e?t:n})))}))},onDeleteClick:function(e,t){window.confirm("Delete ".concat(t,"?"))?w.deletePost(e).then((function(a){l(n.filter((function(t){return t.id!==e}))),re("".concat(t," has been deleted"),"success")})).catch((function(e){return re("".concat(t," has already been deleted"),"fail")})):l(n)}})))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.7917779c.chunk.js.map